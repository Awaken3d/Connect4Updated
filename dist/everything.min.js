var gameLogic;!function(a){function b(a,b){return angular.equals(a,b)}function c(a){return angular.copy(a)}function d(a){function b(b,c){return 0>b||0>c||b>=m||c>=n?0:a[b][c]}for(var c=0;m>c;c++)for(var d=0;n>d;d++)if(0!==b(c,d)&&""!==b(c,d)&&b(c,d)===b(c,d+1)&&b(c,d)===b(c,d+2)&&b(c,d)===b(c,d+3))return b(c,d);for(var c=0;m>c;c++)for(var d=0;n>d;d++)if(0!==b(c,d)&&""!==b(c,d)&&b(c,d)===b(c+1,d)&&b(c,d)===b(c+2,d)&&b(c,d)===b(c+3,d))return b(c,d);for(var c=0;m>c;c++)for(var d=0;n>d;d++)for(var e=-1;1>=e;e+=2)if(0!==b(c,d)&&""!==b(c,d)&&b(c,d)===b(c+1*e,d+1)&&b(c,d)===b(c+2*e,d+2)&&b(c,d)===b(c+3*e,d+3))return b(c,d);for(var c=0;m>c;c++)for(var d=0;n>d;d++)if(""===b(c,d))return""}function e(a){var b,c;for(b=0;5>b;b++)for(c=0;6>c;c++)if(""===a[b][c])return!1;return!0}function f(){return[["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""]]}function g(a,b){var c,d,e=[];for(c=0;6>c;c++)for(d=0;7>d;d++)try{e.push(h(a,c,d,b))}catch(f){}var g=e[Math.floor(Math.random()*e.length)];return g}function h(a,b,f,g){if(void 0===a&&(a=[["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""]]),""!==a[b][f])throw new Error("One can only make a move in an empty position!");for(var h=0,i=5;i>=0;i--)""===a[i][f]&&h++;if(b!==h-1)throw new Error("One can only make a move in an correct position!");var j=c(a);j[b][f]=0===g?"R":"B";var k,l=d(j);return k=""!==l||e(a)?{endMatch:{endMatchScores:"R"===l?[1,0]:"B"===l?[0,1]:[0,0]}}:{setTurn:{turnIndex:1-g}},[k,{set:{key:"board",value:j}},{set:{key:"delta",value:{row:b,col:f}}}]}function i(a,b,c){for(var d=[],e=b,f=a,g=0;g<c.length;g++){var i=c[g],j=h(e.board,i.row,i.col,f);d.push({stateBeforeMove:e,turnIndexBeforeMove:f,move:j,comment:{en:i.comment}}),e={board:j[1].set.value,delta:j[2].set.value},f=1-f}return d}function j(){return[i(0,{board:[["","","","","","",""],["","","","","","",""],["","","B","","","",""],["B","R","B","","","",""],["B","B","R","","","",""],["R","B","R","R","","",""]],delta:{row:3,col:0}},[{row:5,col:3,comment:"Find the position for R where he could win in his next turn by having a diagonal "},{row:2,col:2,comment:"B played here"},{row:2,col:0,comment:"R wins by placing here having 4 diagonal elements ."}]),i(1,{board:[["","","","","","",""],["","","","","","",""],["","","B","","","",""],["","R","B","","","",""],["","R","B","","","",""],["R","B","R","","","",""]],delta:{row:4,col:1}},[{row:2,col:2,comment:"B places here to make a vertical 4"},{row:3,col:1,comment:"R places  to have 4 in a row in subsequent moves"},{row:1,col:2,comment:"B wins by having 4 in a row!"}])]}function k(){return i(0,{},[{row:5,col:4,comment:"The classic opening is to put R in the middle"},{row:5,col:3,comment:"Place B adjacent to R"},{row:5,col:5,comment:"Place R next to original R"},{row:5,col:2,comment:"Place B to adjacent to the first one"},{row:4,col:5,comment:"Place R on top of 1 R"},{row:3,col:3,comment:"Place R on top of yellow to prevent from reaching 4"},{row:4,col:2,comment:"Place B on top of another B."},{row:3,col:2,comment:"place R on top of that as well"},{row:5,col:1,comment:"Place B here to create a 4 next time"},{row:5,col:0,comment:"R blocks from B to create a 4"},{row:4,col:1,comment:"Place B here to create a 4 next time "},{row:4,col:0,comment:"R blocks this as well to prevent B to create a 4"},{row:3,col:1,comment:"Place B here to create a vertical 4 next time"},{row:2,col:1,comment:"R prevents it by placing R on top of B"},{row:3,col:5,comment:"Place B on top of R here"},{row:4,col:4,comment:"R places here"},{row:5,col:6,comment:"Place B here"},{row:2,col:1,comment:"R wins by creating a diagonal  "}])}function l(a){var c=a.move,d=a.turnIndexBeforeMove,e=a.stateBeforeMove;try{var f=c[2].set.value,g=f.row,i=f.col,j=e.board;if(void 0===j&&(j=[["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""]]),""!==j[g][i])return!1;for(var k=0,l=5;l>=0;l--)""===j[l][i]&&k++;if(g!==k-1)return!1;var m=h(j,g,i,d);if(!b(c,m))return!1}catch(n){return!1}return!0}var m=6,n=7;a.isEqual=b,a.copyObject=c,a.getWinner=d,a.isTie=e,a.getInitialBoard=f,a.createComputerMove=g,a.createMove=h,a.getExampleMoves=i,a.getRiddles=j,a.getExampleGame=k,a.isMoveOk=l}(gameLogic||(gameLogic={})),angular.module("myApp",["ngTouch","ui.bootstrap","gameServices"]).factory("gameLogic",function(){return{isMoveOk:gameLogic.isMoveOk,getExampleGame:gameLogic.getExampleGame,getRiddles:gameLogic.getRiddles,getInitialBoard:gameLogic.getInitialBoard,createMove:gameLogic.createMove,createComputerMove:gameLogic.createComputerMove}});var game;!function(a){function b(){return console.log("clicktodrag"+a.clickToDragPiece),"clicktodrag"+a.clickToDragPiece}function c(){resizeGameAreaService.setWidthToHeight(1.16667),gameService.setGame({gameDeveloperEmail:"purnima.p01@gmail.com",minNumberOfPlayers:2,maxNumberOfPlayers:2,isMoveOk:gameLogic.isMoveOk,updateUI:f}),dragAndDropService.addDragListener("gameArea",g)}function d(){gameService.makeMove(gameLogic.createComputerMove(v,s))}function e(a){for(var b=[],c=0;a>c;c++)b.push(c);return b}function f(a){v=a.stateAfterMove.board,t=a.stateAfterMove.delta,void 0===v&&(v=[["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""]]),u=a.turnIndexAfterMove>=0&&a.yourPlayerIndex===a.turnIndexAfterMove,r=a.turnIndexAfterMove>=0&&a.yourPlayerIndex===a.turnIndexAfterMove,s=a.turnIndexAfterMove,r&&""===a.playersInfo[a.yourPlayerIndex].playerId&&(r=!1,$timeout(d,1100))}function g(b,c,d){a.clickToDragPiece=document.getElementById("clickToDragPiece"),l=document.getElementById("gameArea"),m=document.getElementById("draggingLines"),n=document.getElementById("horizontalDraggingLine"),o=document.getElementById("verticalDraggingLine");var e=c-l.offsetLeft,f=d-l.offsetTop;if(0>e||0>f||e>=l.clientWidth||f>=l.clientHeight)return a.clickToDragPiece.style.display="none",void(m.style.display="none");a.clickToDragPiece.style.display="inline",m.style.display="inline";var g=Math.floor(q*e/l.clientWidth),h=Math.floor(p*f/l.clientHeight),r=j(h,g);o.setAttribute("x1",""+r.x),o.setAttribute("x2",""+r.x),n.setAttribute("y1",""+r.y),n.setAttribute("y2",""+r.y);var s=i(h,g);a.clickToDragPiece.style.left=s.left+"px",a.clickToDragPiece.style.top=s.top+"px",("touchend"===b||"touchcancel"===b||"touchleave"===b||"mouseup"===b)&&(a.clickToDragPiece.style.display="none",m.style.display="none",k(h,g))}function h(){return{width:l.clientWidth/q,height:l.clientHeight/p}}function i(a,b){var c=h();return{top:a*c.height,left:b*c.width}}function j(a,b){var c=h();return{x:b*c.width+c.width/2,y:a*c.height+c.height/2}}function k(b,c){a.cellClicked(b,c),$rootScope.$apply(function(){})}var l,m,n,o,p=6,q=7;a.test=b;var r,s,t,u=!1,v=void 0;a.init=c,a.sendComputerMove=d,a.getIntegersTill=e,a.updateUI=f,f({stateAfterMove:{},turnIndexAfterMove:0,yourPlayerIndex:-2}),a.cellClicked=function(a,b){if(r)try{var c=gameLogic.createMove(v,a,b,s);r=!1,gameService.makeMove(c)}catch(d){return}},a.shouldSlowlyAppear=function(a,b){return void 0!==t&&t.row===a&&t.col===b},a.shouldShowImage=function(a,b){var c=v[a][b];return""!==c},a.rows=e(p),a.cols=e(q),a.isWhite=function(a,b){return"B"===v[a][b]?!0:!1},a.isBlack=function(a,b){return"R"===v[a][b]?!0:!1},a.oddSum=function(a,b){return(a+b)%2!==0?!0:!1},a.evenSum=function(a,b){return(a+b)%2===0?!0:!1},a.getImageSrc=function(a,b){var c=v[a][b];return"R"===c?"img/red.png":"B"===c?"img/blue.png":""},a.handleDragEvent=g,a.getSquareWidthHeight=h,a.getSquareTopLeft=i,a.getSquareCenterXY=j,a.dragDone=k,a.getPreviewSrc=function(){return 1===s?"img/blue.png":"img/red.png"}}(game||(game={})),angular.module("myApp").run(function(){$rootScope.game=game,translate.setLanguage("en",{RULES_OF_CONNECT4:"Rules of Connect4",RULES_SLIDE1:"Each player drops a disc of their color down a column. The disc can fall only on the lowest available spot in the column",RULES_SLIDE2:"The objective of the game is to connect four of one's own discs of the same color next to each other vertically, horizontally, or diagonally before your opponent",CLOSE:"Close"}),game.init()});
//# sourceMappingURL=everything.min.js.map