var h=6,w=7;angular.module("myApp",["ngTouch","ui.bootstrap","gameServices"]).factory("gameLogic",function(){function a(a,b){return angular.equals(a,b)}function b(a){return angular.copy(a)}function c(a){function b(b,c){return 0>b||0>c||b>=h||c>=w?0:a[b][c]}for(var c=0;h>c;c++)for(var d=0;w>d;d++)if(0!==b(c,d)&&""!==b(c,d)&&b(c,d)===b(c,d+1)&&b(c,d)===b(c,d+2)&&b(c,d)===b(c,d+3))return b(c,d);for(var c=0;h>c;c++)for(var d=0;w>d;d++)if(0!==b(c,d)&&""!==b(c,d)&&b(c,d)===b(c+1,d)&&b(c,d)===b(c+2,d)&&b(c,d)===b(c+3,d))return b(c,d);for(var c=0;h>c;c++)for(var d=0;w>d;d++)for(var e=-1;1>=e;e+=2)if(0!==b(c,d)&&""!==b(c,d)&&b(c,d)===b(c+1*e,d+1)&&b(c,d)===b(c+2*e,d+2)&&b(c,d)===b(c+3*e,d+3))return b(c,d);for(var c=0;h>c;c++)for(var d=0;w>d;d++)if(""===b(c,d))return""}function d(a){var b,c;for(b=0;5>b;b++)for(c=0;6>c;c++)if(""===a[b][c])return!1;return!0}function e(){return[["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""]]}function f(a,b){var c,d,e=[];for(c=0;6>c;c++)for(d=0;7>d;d++)try{e.push(g(a,c,d,b))}catch(f){}var h=e[Math.floor(Math.random()*e.length)];return h}function g(a,e,f,g){if(void 0===a&&(a=[["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""]]),""!==a[e][f])throw new Error("One can only make a move in an empty position!");for(var h=0,i=5;i>=0;i--)""===a[i][f]&&h++;if(e!==h-1)throw new Error("One can only make a move in an correct position!");var j=b(a);j[e][f]=0===g?"R":"B";var k,l=c(j);return k=""!==l||d(a)?{endMatch:{endMatchScores:"R"===l?[1,0]:"B"===l?[0,1]:[0,0]}}:{setTurn:{turnIndex:1-g}},[k,{set:{key:"board",value:j}},{set:{key:"delta",value:{row:e,col:f}}}]}function i(a,b,c){for(var d=[],e=b,f=a,h=0;h<c.length;h++){var i=c[h],j=g(e.board,i.row,i.col,f);d.push({stateBeforeMove:e,turnIndexBeforeMove:f,move:j,comment:{en:i.comment}}),e={board:j[1].set.value,delta:j[2].set.value},f=1-f}return d}function j(){return[i(0,{board:[["","","","","","",""],["","","","","","",""],["","","B","","","",""],["B","R","B","","","",""],["B","B","R","","","",""],["R","B","R","R","","",""]],delta:{row:3,col:0}},[{row:5,col:3,comment:"Find the position for R where he could win in his next turn by having a diagonal "},{row:2,col:2,comment:"B played here"},{row:2,col:0,comment:"R wins by placing here having 4 diagonal elements ."}]),i(1,{board:[["","","","","","",""],["","","","","","",""],["","","B","","","",""],["","R","B","","","",""],["","R","B","","","",""],["R","B","R","","","",""]],delta:{row:4,col:1}},[{row:2,col:2,comment:"B places here to make a vertical 4"},{row:3,col:1,comment:"R places  to have 4 in a row in subsequent moves"},{row:1,col:2,comment:"B wins by having 4 in a row!"}])]}function k(){return i(0,{},[{row:5,col:4,comment:"The classic opening is to put R in the middle"},{row:5,col:3,comment:"Place B adjacent to R"},{row:5,col:5,comment:"Place R next to original R"},{row:5,col:2,comment:"Place B to adjacent to the first one"},{row:4,col:5,comment:"Place R on top of 1 R"},{row:3,col:3,comment:"Place R on top of yellow to prevent from reaching 4"},{row:4,col:2,comment:"Place B on top of another B."},{row:3,col:2,comment:"place R on top of that as well"},{row:5,col:1,comment:"Place B here to create a 4 next time"},{row:5,col:0,comment:"R blocks from B to create a 4"},{row:4,col:1,comment:"Place B here to create a 4 next time "},{row:4,col:0,comment:"R blocks this as well to prevent B to create a 4"},{row:3,col:1,comment:"Place B here to create a vertical 4 next time"},{row:2,col:1,comment:"R prevents it by placing R on top of B"},{row:3,col:5,comment:"Place B on top of R here"},{row:4,col:4,comment:"R places here"},{row:5,col:6,comment:"Place B here"},{row:2,col:1,comment:"R wins by creating a diagonal  "}])}function l(b){var c=b.move,d=b.turnIndexBeforeMove,e=b.stateBeforeMove;try{var f=c[2].set.value,h=f.row,i=f.col,j=e.board;if(void 0===j&&(j=[["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""]]),""!==j[h][i])return!1;for(var k=0,l=5;l>=0;l--)""===j[l][i]&&k++;if(h!==k-1)return!1;var m=g(j,h,i,d);if(!a(c,m))return!1}catch(n){return!1}return!0}return{isMoveOk:l,getExampleGame:k,getRiddles:j,getInitialBoard:e,createMove:g,createComputerMove:f}}),angular.module("myApp").controller("Ctrl",["$scope","$rootScope","$log","$timeout","gameLogic",function(a,b,c,d,e){"use strict";function f(){gameService.makeMove(e.createComputerMove(a.board,a.turnIndex))}function g(a){for(var b=[],c=0;a>c;c++)b.push(c);return b}function h(b){a.board=b.stateAfterMove.board,a.delta=b.stateAfterMove.delta,void 0===a.board&&(a.board=[["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""]]),t=b.turnIndexAfterMove>=0&&b.yourPlayerIndex===b.turnIndexAfterMove,a.isYourTurn=b.turnIndexAfterMove>=0&&b.yourPlayerIndex===b.turnIndexAfterMove,a.turnIndex=b.turnIndexAfterMove,a.isYourTurn&&""===b.playersInfo[b.yourPlayerIndex].playerId&&(a.isYourTurn=!1,d(f,1100))}function i(a,b,c){var d=b-gameArea.offsetLeft,e=c-gameArea.offsetTop;if(0>d||0>e||d>=gameArea.clientWidth||e>=gameArea.clientHeight)return s.style.display="none",void(p.style.display="none");s.style.display="inline",p.style.display="inline";var f=Math.floor(o*d/gameArea.clientWidth),g=Math.floor(n*e/gameArea.clientHeight),h=l(g,f);r.setAttribute("x1",h.x),r.setAttribute("x2",h.x),q.setAttribute("y1",h.y),q.setAttribute("y2",h.y);var i=k(g,f);s.style.left=i.left+"px",s.style.top=i.top+"px",("touchend"===a||"touchcancel"===a||"touchleave"===a||"mouseup"===a)&&(s.style.display="none",p.style.display="none",m(g,f))}function j(){return{width:gameArea.clientWidth/o,height:gameArea.clientHeight/n}}function k(a,b){var c=j();return{top:a*c.height,left:b*c.width}}function l(a,b){var c=j();return{x:b*c.width+c.width/2,y:a*c.height+c.height/2}}function m(d,e){a.cellClicked(d,e),b.$apply(function(){c.info("Dragged to "+d+"x"+e)})}resizeGameAreaService.setWidthToHeight(1.16667);var n=6,o=7;dragAndDropService.addDragListener("gameArea",i);var p=document.getElementById("draggingLines"),q=document.getElementById("horizontalDraggingLine"),r=document.getElementById("verticalDraggingLine"),s=document.getElementById("clickToDragPiece"),t=!1;h({stateAfterMove:{},turnIndexAfterMove:0,yourPlayerIndex:-2}),a.cellClicked=function(b,d){if(c.info(["Clicked on cell:",b,d]),a.isYourTurn)try{var f=e.createMove(a.board,b,d,a.turnIndex);a.isYourTurn=!1,gameService.makeMove(f)}catch(g){return void c.info(["wrong move",b,d])}},a.shouldSlowlyAppear=function(b,c){return void 0!==a.delta&&a.delta.row===b&&a.delta.col===c},a.shouldShowImage=function(b,c){var d=a.board[b][c];return""!==d},a.rows=g(n),a.cols=g(o),a.isWhite=function(b,c){return"B"===a.board[b][c]?!0:!1},a.isBlack=function(b,c){return"R"===a.board[b][c]?!0:!1},a.oddSum=function(a,b){return(a+b)%2!==0?!0:!1},a.evenSum=function(a,b){return(a+b)%2===0?!0:!1},a.getImageSrc=function(b,c){var d=a.board[b][c];return"R"===d?"img/red.png":"B"===d?"img/blue.png":""},a.getPreviewSrc=function(){return 1===a.turnIndex?"img/blue.png":"img/red.png"},gameService.setGame({gameDeveloperEmail:"purnima.p01@gmail.com",minNumberOfPlayers:2,maxNumberOfPlayers:2,isMoveOk:e.isMoveOk,updateUI:h})}]);
//# sourceMappingURL=everything.min.js.map